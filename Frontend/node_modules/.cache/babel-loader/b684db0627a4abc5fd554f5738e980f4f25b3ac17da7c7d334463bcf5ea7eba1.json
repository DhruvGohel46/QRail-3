{"ast":null,"code":"import _objectSpread from\"C:/QRail/Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import QRConfiguration from'./QRConfiguration';import QRPreview from'./QRPreview';import QRActions from'./QRActions';import{api}from'../../services/api';import'./QRGenerator.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const QRGenerator=()=>{const[assetList,setAssetList]=useState([]);const[selectedAsset,setSelectedAsset]=useState(null);const[qrOptions,setQrOptions]=useState({errorCorrection:'M',format:'svg'});const[qrData,setQrData]=useState('');const[showQR,setShowQR]=useState(false);useEffect(()=>{// Fetch assets from backend\nfetchAssets();},[]);const fetchAssets=async()=>{try{const response=await fetch('/api/assets',{credentials:'include'});const data=await response.json();const normalizedAssets=(data.assets||[]).map(asset=>_objectSpread(_objectSpread({},asset),{},{assetId:asset.asset_id||asset.assetId,asset_id:asset.asset_id||asset.assetId}));setAssetList(normalizedAssets);}catch(err){console.error('Failed to load assets:',err);setAssetList([]);}};const handleGenerateQR=async()=>{if(selectedAsset){try{const assetId=selectedAsset.assetId||selectedAsset.asset_id;const result=await api.qr.generate(assetId,qrOptions);if(result.qr_url){setQrData(result.qr_url);setShowQR(true);}else{console.error('No QR URL in response');}}catch(err){console.error('Failed to generate QR code:',err);// TODO: Add proper error handling UI\n}}};return/*#__PURE__*/_jsxs(\"div\",{className:\"qr-generator-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"page-header\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"page-title\",children:\"QR Code Generator\"}),/*#__PURE__*/_jsx(\"p\",{className:\"page-subtitle\",children:\"Generate high-quality QR codes with advanced error correction\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"qr-generator-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"qr-config-section\",children:[/*#__PURE__*/_jsx(QRConfiguration,{assetList:assetList,selectedAsset:selectedAsset,setSelectedAsset:setSelectedAsset,qrOptions:qrOptions,setQrOptions:setQrOptions}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleGenerateQR,disabled:!selectedAsset,className:\"generate-qr-button md-button\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"material-icons-round\",children:\"qr_code\"}),\"Generate QR Code\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"qr-preview-section\",children:[/*#__PURE__*/_jsx(QRPreview,{data:qrData,options:qrOptions,showQR:showQR}),showQR&&qrData&&/*#__PURE__*/_jsx(QRActions,{data:qrData,options:qrOptions})]})]})]});};export default QRGenerator;","map":{"version":3,"names":["React","useState","useEffect","QRConfiguration","QRPreview","QRActions","api","jsx","_jsx","jsxs","_jsxs","QRGenerator","assetList","setAssetList","selectedAsset","setSelectedAsset","qrOptions","setQrOptions","errorCorrection","format","qrData","setQrData","showQR","setShowQR","fetchAssets","response","fetch","credentials","data","json","normalizedAssets","assets","map","asset","_objectSpread","assetId","asset_id","err","console","error","handleGenerateQR","result","qr","generate","qr_url","className","children","onClick","disabled","options"],"sources":["C:/QRail/Frontend/src/components/QRGenerator/QRGenerator.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport QRConfiguration from './QRConfiguration';\r\nimport QRPreview from './QRPreview';\r\nimport QRActions from './QRActions';\r\nimport { api } from '../../services/api';\r\nimport './QRGenerator.css';\r\n\r\nconst QRGenerator = () => {\r\n  const [assetList, setAssetList] = useState([]);\r\n  const [selectedAsset, setSelectedAsset] = useState(null);\r\n  const [qrOptions, setQrOptions] = useState({\r\n    errorCorrection: 'M',\r\n    format: 'svg'\r\n  });\r\n  const [qrData, setQrData] = useState('');\r\n  const [showQR, setShowQR] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // Fetch assets from backend\r\n    fetchAssets();\r\n  }, []);\r\n\r\n  const fetchAssets = async () => {\r\n    try {\r\n      const response = await fetch('/api/assets', { credentials: 'include' });\r\n      const data = await response.json();\r\n      \r\n      const normalizedAssets = (data.assets || []).map(asset => ({\r\n        ...asset,\r\n        assetId: asset.asset_id || asset.assetId,\r\n        asset_id: asset.asset_id || asset.assetId,\r\n      }));\r\n      \r\n      setAssetList(normalizedAssets);\r\n    } catch (err) {\r\n      console.error('Failed to load assets:', err);\r\n      setAssetList([]);\r\n    }\r\n  };\r\n\r\n  const handleGenerateQR = async () => {\r\n    if (selectedAsset) {\r\n      try {\r\n        const assetId = selectedAsset.assetId || selectedAsset.asset_id;\r\n        const result = await api.qr.generate(assetId, qrOptions);\r\n        \r\n        if (result.qr_url) {\r\n          setQrData(result.qr_url);\r\n          setShowQR(true);\r\n        } else {\r\n          console.error('No QR URL in response');\r\n        }\r\n      } catch (err) {\r\n        console.error('Failed to generate QR code:', err);\r\n        // TODO: Add proper error handling UI\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"qr-generator-container\">\r\n      <div className=\"page-header\">\r\n        <h2 className=\"page-title\">QR Code Generator</h2>\r\n        <p className=\"page-subtitle\">Generate high-quality QR codes with advanced error correction</p>\r\n      </div>\r\n\r\n      <div className=\"qr-generator-grid\">\r\n        {/* Configuration Section */}\r\n        <div className=\"qr-config-section\">\r\n          <QRConfiguration\r\n            assetList={assetList}\r\n            selectedAsset={selectedAsset}\r\n            setSelectedAsset={setSelectedAsset}\r\n            qrOptions={qrOptions}\r\n            setQrOptions={setQrOptions}\r\n          />\r\n          \r\n          {/* Generate Button */}\r\n          <button\r\n            onClick={handleGenerateQR}\r\n            disabled={!selectedAsset}\r\n            className=\"generate-qr-button md-button\"\r\n          >\r\n            <span className=\"material-icons-round\">qr_code</span>\r\n            Generate QR Code\r\n          </button>\r\n        </div>\r\n\r\n        {/* Preview Section */}\r\n        <div className=\"qr-preview-section\">\r\n          <QRPreview\r\n            data={qrData}\r\n            options={qrOptions}\r\n            showQR={showQR}\r\n          />\r\n          \r\n          {showQR && qrData && (\r\n            <QRActions\r\n              data={qrData}\r\n              options={qrOptions}\r\n            />\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QRGenerator;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}