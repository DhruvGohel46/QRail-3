{"ast":null,"code":"var _jsxFileName = \"C:\\\\QRail\\\\Frontend\\\\src\\\\components\\\\QRGenerator\\\\QRGenerator.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport QRConfiguration from './QRConfiguration';\nimport QRPreview from './QRPreview';\nimport QRActions from './QRActions';\nimport api from '../../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst QRGenerator = () => {\n  _s();\n  const [assetList, setAssetList] = useState([]);\n  const [selectedAsset, setSelectedAsset] = useState(null);\n  const [qrOptions, setQrOptions] = useState({\n    errorCorrection: 'M',\n    format: 'svg'\n  });\n  const [qrData, setQrData] = useState('');\n  const [refreshPreview, setRefreshPreview] = useState(false);\n  useEffect(() => {\n    // Fetch assets to populate dropdown\n    api.assets.getAll().then(data => {\n      const normalizedAssets = (data.assets || []).map(asset => ({\n        ...asset,\n        assetId: asset.asset_id || asset.assetId\n      }));\n      setAssetList(normalizedAssets);\n    }).catch(err => console.error('Failed to load assets:', err));\n  }, []);\n\n  // Update QR data whenever asset or options change\n  useEffect(() => {\n    if (selectedAsset) {\n      setQrData(JSON.stringify({\n        assetId: selectedAsset.assetId,\n        name: selectedAsset.name,\n        location: selectedAsset.location\n      }));\n      setRefreshPreview(r => !r); // Triggers re-render in QRPreview if needed\n    }\n  }, [selectedAsset, qrOptions]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"qr-generator\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"QR Code Generator\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(QRConfiguration, {\n      assetList: assetList,\n      selectedAsset: selectedAsset,\n      setSelectedAsset: setSelectedAsset,\n      qrOptions: qrOptions,\n      setQrOptions: setQrOptions\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this), selectedAsset && /*#__PURE__*/_jsxDEV(QRPreview, {\n      data: qrData,\n      options: qrOptions\n    }, selectedAsset.assetId + qrOptions.errorCorrection + qrOptions.format + refreshPreview, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }, this), selectedAsset && /*#__PURE__*/_jsxDEV(QRActions, {\n      data: qrData,\n      options: qrOptions\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 5\n  }, this);\n};\n_s(QRGenerator, \"hTDzfvH816aNGG5j1O4jMJ8a2jA=\");\n_c = QRGenerator;\nexport default QRGenerator;\nvar _c;\n$RefreshReg$(_c, \"QRGenerator\");","map":{"version":3,"names":["React","useState","useEffect","QRConfiguration","QRPreview","QRActions","api","jsxDEV","_jsxDEV","QRGenerator","_s","assetList","setAssetList","selectedAsset","setSelectedAsset","qrOptions","setQrOptions","errorCorrection","format","qrData","setQrData","refreshPreview","setRefreshPreview","assets","getAll","then","data","normalizedAssets","map","asset","assetId","asset_id","catch","err","console","error","JSON","stringify","name","location","r","className","children","fileName","_jsxFileName","lineNumber","columnNumber","options","_c","$RefreshReg$"],"sources":["C:/QRail/Frontend/src/components/QRGenerator/QRGenerator.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport QRConfiguration from './QRConfiguration';\r\nimport QRPreview from './QRPreview';\r\nimport QRActions from './QRActions';\r\nimport api from '../../services/api';\r\n\r\nconst QRGenerator = () => {\r\n  const [assetList, setAssetList] = useState([]);\r\n  const [selectedAsset, setSelectedAsset] = useState(null);\r\n  const [qrOptions, setQrOptions] = useState({ errorCorrection: 'M', format: 'svg' });\r\n  const [qrData, setQrData] = useState('');\r\n  const [refreshPreview, setRefreshPreview] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // Fetch assets to populate dropdown\r\n    api.assets.getAll()\r\n      .then(data => {\r\n        const normalizedAssets = (data.assets || []).map(asset => ({\r\n          ...asset,\r\n          assetId: asset.asset_id || asset.assetId,\r\n        }));\r\n        setAssetList(normalizedAssets);\r\n      })\r\n      .catch(err => console.error('Failed to load assets:', err));\r\n  }, []);\r\n\r\n  // Update QR data whenever asset or options change\r\n  useEffect(() => {\r\n    if (selectedAsset) {\r\n      setQrData(JSON.stringify({\r\n        assetId: selectedAsset.assetId,\r\n        name: selectedAsset.name,\r\n        location: selectedAsset.location\r\n      }));\r\n      setRefreshPreview(r => !r); // Triggers re-render in QRPreview if needed\r\n    }\r\n  }, [selectedAsset, qrOptions]);\r\n\r\n  return (\r\n    <div className=\"qr-generator\">\r\n      <h2>QR Code Generator</h2>\r\n      <QRConfiguration\r\n        assetList={assetList}\r\n        selectedAsset={selectedAsset}\r\n        setSelectedAsset={setSelectedAsset}\r\n        qrOptions={qrOptions}\r\n        setQrOptions={setQrOptions}\r\n      />\r\n      {selectedAsset && (\r\n        <QRPreview\r\n          data={qrData}\r\n          options={qrOptions}\r\n          key={selectedAsset.assetId + qrOptions.errorCorrection + qrOptions.format + refreshPreview}\r\n        />\r\n      )}\r\n      {selectedAsset && (\r\n        <QRActions\r\n          data={qrData}\r\n          options={qrOptions}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QRGenerator;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}