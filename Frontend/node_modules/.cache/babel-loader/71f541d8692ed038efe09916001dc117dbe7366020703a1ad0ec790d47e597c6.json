{"ast":null,"code":"import React,{useState,useEffect}from'react';import Header from'./Header';import AssetList from'./Assets/AssetList';import QRGenerator from'./QRGenerator/QRGenerator';import ReportsTab from'./Reports/ReportsTab';import AdminPanel from'./Admin/AdminPanel';import MaintenanceTab from'./Maintenance/MaintenanceTab';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Dashboard=_ref=>{let{user,onLogout}=_ref;const[activeTab,setActiveTab]=useState('assets');const[mobileMenuOpen,setMobileMenuOpen]=useState(false);// Role-based permissions\nconst PERMISSIONS={admin:{tabs:['assets','qr-generator','maintenance','reports','admin-panel'],canAddAsset:true,canDeleteAsset:true,canGenerateQR:true},manufacturer:{tabs:['assets','qr-generator'],canAddAsset:true,canDeleteAsset:false,canGenerateQR:true},worker:{tabs:['maintenance'],canAddAsset:false,canDeleteAsset:false,canGenerateQR:false},engineer:{tabs:['maintenance','assets','reports'],canAddAsset:false,canDeleteAsset:true,canGenerateQR:false}};const userPermissions=PERMISSIONS[user.role]||PERMISSIONS.worker;useEffect(()=>{// Set first allowed tab as active\nif(userPermissions.tabs.length>0){setActiveTab(userPermissions.tabs[0]);}},[user.role]);const handleTabChange=tabId=>{if(userPermissions.tabs.includes(tabId)){setActiveTab(tabId);setMobileMenuOpen(false);}};const toggleMobileMenu=()=>{setMobileMenuOpen(!mobileMenuOpen);};const renderTabContent=()=>{switch(activeTab){case'assets':return/*#__PURE__*/_jsx(AssetList,{permissions:userPermissions});case'qr-generator':return/*#__PURE__*/_jsx(QRGenerator,{});case'maintenance':return/*#__PURE__*/_jsx(MaintenanceTab,{user:user});case'reports':return/*#__PURE__*/_jsx(ReportsTab,{});case'admin-panel':return/*#__PURE__*/_jsx(AdminPanel,{});default:return/*#__PURE__*/_jsx(AssetList,{permissions:userPermissions});}};return/*#__PURE__*/_jsxs(\"div\",{id:\"mainApp\",children:[/*#__PURE__*/_jsx(Header,{user:user,onLogout:onLogout,mobileMenuOpen:mobileMenuOpen,toggleMobileMenu:toggleMobileMenu,activeTab:activeTab,onTabChange:handleTabChange,allowedTabs:userPermissions.tabs}),/*#__PURE__*/_jsx(\"main\",{className:\"main-content\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"content-section\",children:renderTabContent()})})})]});};export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","Header","AssetList","QRGenerator","ReportsTab","AdminPanel","MaintenanceTab","jsx","_jsx","jsxs","_jsxs","Dashboard","_ref","user","onLogout","activeTab","setActiveTab","mobileMenuOpen","setMobileMenuOpen","PERMISSIONS","admin","tabs","canAddAsset","canDeleteAsset","canGenerateQR","manufacturer","worker","engineer","userPermissions","role","length","handleTabChange","tabId","includes","toggleMobileMenu","renderTabContent","permissions","id","children","onTabChange","allowedTabs","className"],"sources":["C:/QRail/Frontend/src/components/Dashboard.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Header from './Header';\r\nimport AssetList from './Assets/AssetList';\r\nimport QRGenerator from './QRGenerator/QRGenerator';\r\nimport ReportsTab from './Reports/ReportsTab';\r\nimport AdminPanel from './Admin/AdminPanel';\r\nimport MaintenanceTab from './Maintenance/MaintenanceTab';\r\n\r\n\r\nconst Dashboard = ({ user, onLogout }) => {\r\n  const [activeTab, setActiveTab] = useState('assets');\r\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\r\n\r\n  // Role-based permissions\r\n  const PERMISSIONS = {\r\n    admin: {\r\n      tabs: ['assets', 'qr-generator', 'maintenance', 'reports', 'admin-panel'],\r\n      canAddAsset: true,\r\n      canDeleteAsset: true,\r\n      canGenerateQR: true\r\n    },\r\n    manufacturer: {\r\n      tabs: ['assets', 'qr-generator'],\r\n      canAddAsset: true,\r\n      canDeleteAsset: false,\r\n      canGenerateQR: true\r\n    },\r\n    worker: {\r\n      tabs: ['maintenance'],\r\n      canAddAsset: false,\r\n      canDeleteAsset: false,\r\n      canGenerateQR: false\r\n    },\r\n    engineer: {\r\n      tabs: ['maintenance', 'assets', 'reports'],\r\n      canAddAsset: false,\r\n      canDeleteAsset: true,\r\n      canGenerateQR: false\r\n    }\r\n  };\r\n\r\n  const userPermissions = PERMISSIONS[user.role] || PERMISSIONS.worker;\r\n\r\n  useEffect(() => {\r\n    // Set first allowed tab as active\r\n    if (userPermissions.tabs.length > 0) {\r\n      setActiveTab(userPermissions.tabs[0]);\r\n    }\r\n  }, [user.role]);\r\n\r\n  const handleTabChange = (tabId) => {\r\n    if (userPermissions.tabs.includes(tabId)) {\r\n      setActiveTab(tabId);\r\n      setMobileMenuOpen(false);\r\n    }\r\n  };\r\n\r\n  const toggleMobileMenu = () => {\r\n    setMobileMenuOpen(!mobileMenuOpen);\r\n  };\r\n\r\n  const renderTabContent = () => {\r\n    switch (activeTab) {\r\n      case 'assets':\r\n        return <AssetList permissions={userPermissions} />;\r\n      case 'qr-generator':\r\n        return <QRGenerator />;\r\n      case 'maintenance':\r\n        return <MaintenanceTab user={user} />;\r\n      case 'reports':\r\n        return <ReportsTab />;\r\n      case 'admin-panel':\r\n        return <AdminPanel />;\r\n      default:\r\n        return <AssetList permissions={userPermissions} />;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div id=\"mainApp\">\r\n      <Header\r\n        user={user}\r\n        onLogout={onLogout}\r\n        mobileMenuOpen={mobileMenuOpen}\r\n        toggleMobileMenu={toggleMobileMenu}\r\n        activeTab={activeTab}\r\n        onTabChange={handleTabChange}\r\n        allowedTabs={userPermissions.tabs}\r\n      />\r\n\r\n      <main className=\"main-content\">\r\n        <div className=\"container\">\r\n          <div className=\"content-section\">\r\n            {renderTabContent()}\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}