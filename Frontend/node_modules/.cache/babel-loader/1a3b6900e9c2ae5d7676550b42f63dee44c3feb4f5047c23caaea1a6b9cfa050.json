{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./index.css';import'./app.css';import'./styles/responsive.css';import Login from'./components/Login';import RegistrationModal from'./components/RegistrationModal';import Dashboard from'./components/Dashboard';import Loader from'./components/shared/Loader';import api from'./services/api';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[user,setUser]=useState(null);const[showRegistration,setShowRegistration]=useState(false);const[loading,setLoading]=useState(true);// Check if user is already logged in\nuseEffect(()=>{api.auth.checkSession().then(data=>{if(data.authenticated){setUser(data.user);}}).catch(()=>{// Not logged in\n}).finally(()=>{setLoading(false);});},[]);const handleLoginSuccess=userData=>{setUser(userData);};const handleLogout=async()=>{try{await api.auth.logout();setUser(null);}catch(error){console.error('Logout failed:',error);}};if(loading){return/*#__PURE__*/_jsx(Loader,{fullscreen:true,text:\"Loading...\"});}return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:!user?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Login,{onLoginSuccess:handleLoginSuccess,onOpenRegistration:()=>setShowRegistration(true)}),/*#__PURE__*/_jsx(RegistrationModal,{isOpen:showRegistration,onClose:()=>setShowRegistration(false)})]}):/*#__PURE__*/_jsx(Dashboard,{user:user,onLogout:handleLogout})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","Login","RegistrationModal","Dashboard","Loader","api","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","App","user","setUser","showRegistration","setShowRegistration","loading","setLoading","auth","checkSession","then","data","authenticated","catch","finally","handleLoginSuccess","userData","handleLogout","logout","error","console","fullscreen","text","className","children","onLoginSuccess","onOpenRegistration","isOpen","onClose","onLogout"],"sources":["C:/QRail/Frontend/src/app.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport './index.css';\r\nimport './app.css';\r\nimport './styles/responsive.css';\r\nimport Login from './components/Login';\r\nimport RegistrationModal from './components/RegistrationModal';\r\nimport Dashboard from './components/Dashboard';\r\nimport Loader from './components/shared/Loader';\r\nimport api from './services/api';\r\n\r\nfunction App() {\r\n  const [user, setUser] = useState(null);\r\n  const [showRegistration, setShowRegistration] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // Check if user is already logged in\r\n  useEffect(() => {\r\n    api.auth.checkSession()\r\n      .then(data => {\r\n        if (data.authenticated) {\r\n          setUser(data.user);\r\n        }\r\n      })\r\n      .catch(() => {\r\n        // Not logged in\r\n      })\r\n      .finally(() => {\r\n        setLoading(false);\r\n      });\r\n  }, []);\r\n\r\n  const handleLoginSuccess = (userData) => {\r\n    setUser(userData);\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      await api.auth.logout();\r\n      setUser(null);\r\n    } catch (error) {\r\n      console.error('Logout failed:', error);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return <Loader fullscreen text=\"Loading...\" />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      {!user ? (\r\n        <>\r\n          <Login \r\n            onLoginSuccess={handleLoginSuccess}\r\n            onOpenRegistration={() => setShowRegistration(true)}\r\n          />\r\n          <RegistrationModal \r\n            isOpen={showRegistration}\r\n            onClose={() => setShowRegistration(false)}\r\n          />\r\n        </>\r\n      ) : (\r\n        <Dashboard user={user} onLogout={handleLogout} />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,aAAa,CACpB,MAAO,WAAW,CAClB,MAAO,yBAAyB,CAChC,MAAO,CAAAC,KAAK,KAAM,oBAAoB,CACtC,MAAO,CAAAC,iBAAiB,KAAM,gCAAgC,CAC9D,MAAO,CAAAC,SAAS,KAAM,wBAAwB,CAC9C,MAAO,CAAAC,MAAM,KAAM,4BAA4B,CAC/C,MAAO,CAAAC,GAAG,KAAM,gBAAgB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,QAAA,IAAAC,SAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEjC,QAAS,CAAAC,GAAGA,CAAA,CAAG,CACb,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGf,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAACgB,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGjB,QAAQ,CAAC,KAAK,CAAC,CAC/D,KAAM,CAACkB,OAAO,CAAEC,UAAU,CAAC,CAAGnB,QAAQ,CAAC,IAAI,CAAC,CAE5C;AACAC,SAAS,CAAC,IAAM,CACdK,GAAG,CAACc,IAAI,CAACC,YAAY,CAAC,CAAC,CACpBC,IAAI,CAACC,IAAI,EAAI,CACZ,GAAIA,IAAI,CAACC,aAAa,CAAE,CACtBT,OAAO,CAACQ,IAAI,CAACT,IAAI,CAAC,CACpB,CACF,CAAC,CAAC,CACDW,KAAK,CAAC,IAAM,CACX;AAAA,CACD,CAAC,CACDC,OAAO,CAAC,IAAM,CACbP,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAAC,CACN,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAQ,kBAAkB,CAAIC,QAAQ,EAAK,CACvCb,OAAO,CAACa,QAAQ,CAAC,CACnB,CAAC,CAED,KAAM,CAAAC,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CACF,KAAM,CAAAvB,GAAG,CAACc,IAAI,CAACU,MAAM,CAAC,CAAC,CACvBf,OAAO,CAAC,IAAI,CAAC,CACf,CAAE,MAAOgB,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,gBAAgB,CAAEA,KAAK,CAAC,CACxC,CACF,CAAC,CAED,GAAIb,OAAO,CAAE,CACX,mBAAOV,IAAA,CAACH,MAAM,EAAC4B,UAAU,MAACC,IAAI,CAAC,YAAY,CAAE,CAAC,CAChD,CAEA,mBACE1B,IAAA,QAAK2B,SAAS,CAAC,KAAK,CAAAC,QAAA,CACjB,CAACtB,IAAI,cACJF,KAAA,CAAAF,SAAA,EAAA0B,QAAA,eACE5B,IAAA,CAACN,KAAK,EACJmC,cAAc,CAAEV,kBAAmB,CACnCW,kBAAkB,CAAEA,CAAA,GAAMrB,mBAAmB,CAAC,IAAI,CAAE,CACrD,CAAC,cACFT,IAAA,CAACL,iBAAiB,EAChBoC,MAAM,CAAEvB,gBAAiB,CACzBwB,OAAO,CAAEA,CAAA,GAAMvB,mBAAmB,CAAC,KAAK,CAAE,CAC3C,CAAC,EACF,CAAC,cAEHT,IAAA,CAACJ,SAAS,EAACU,IAAI,CAAEA,IAAK,CAAC2B,QAAQ,CAAEZ,YAAa,CAAE,CACjD,CACE,CAAC,CAEV,CAEA,cAAe,CAAAhB,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}