{"ast":null,"code":"var _jsxFileName = \"C:\\\\QRail\\\\Frontend\\\\src\\\\components\\\\Maintenance\\\\MaintenanceInput.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport './MaintenanceInput.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MaintenanceInput = ({\n  onSubmit,\n  initialValue = ''\n}) => {\n  _s();\n  var _supportedLanguages$f2;\n  const [description, setDescription] = useState(initialValue);\n  const [isListening, setIsListening] = useState(false);\n  const [isEnhancing, setIsEnhancing] = useState(false);\n  const [isProcessingSpeech, setIsProcessingSpeech] = useState(false);\n  const [speechSupported, setSpeechSupported] = useState(false);\n  const [selectedLanguage, setSelectedLanguage] = useState('en');\n  const [supportedLanguages, setSupportedLanguages] = useState([]);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const mediaRecorderRef = useRef(null);\n  const audioChunksRef = useRef([]);\n\n  // Sync with parent's initialValue changes\n  useEffect(() => {\n    setDescription(initialValue);\n  }, [initialValue]);\n\n  // Notify parent of description changes\n  useEffect(() => {\n    if (onSubmit) {\n      onSubmit(description);\n    }\n  }, [description]);\n\n  // Load supported languages on mount\n  useEffect(() => {\n    fetchSupportedLanguages();\n    checkAudioSupport();\n  }, []);\n  const fetchSupportedLanguages = async () => {\n    try {\n      const response = await fetch('/api/speech/languages', {\n        credentials: 'include'\n      });\n      const data = await response.json();\n      if (data.success) {\n        setSupportedLanguages(data.languages);\n      }\n    } catch (err) {\n      console.error('Failed to load languages:', err);\n      // Fallback languages\n      setSupportedLanguages([{\n        code: 'en',\n        name: 'English',\n        native: 'English'\n      }, {\n        code: 'hi',\n        name: 'Hindi',\n        native: '‡§π‡§ø‡§®‡•ç‡§¶‡•Ä'\n      }, {\n        code: 'gu',\n        name: 'Gujarati',\n        native: '‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä'\n      }, {\n        code: 'ta',\n        name: 'Tamil',\n        native: '‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç'\n      }, {\n        code: 'te',\n        name: 'Telugu',\n        native: '‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å'\n      }, {\n        code: 'bn',\n        name: 'Bengali',\n        native: '‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ'\n      }, {\n        code: 'mr',\n        name: 'Marathi',\n        native: '‡§Æ‡§∞‡§æ‡§†‡•Ä'\n      }, {\n        code: 'kn',\n        name: 'Kannada',\n        native: '‡≤ï‡≤®‡≥ç‡≤®‡≤°'\n      }, {\n        code: 'ml',\n        name: 'Malayalam',\n        native: '‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç'\n      }, {\n        code: 'pa',\n        name: 'Punjabi',\n        native: '‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä'\n      }]);\n    }\n  };\n  const checkAudioSupport = () => {\n    var _navigator$mediaDevic;\n    const hasMediaRecorder = !!((_navigator$mediaDevic = navigator.mediaDevices) !== null && _navigator$mediaDevic !== void 0 && _navigator$mediaDevic.getUserMedia);\n    setSpeechSupported(hasMediaRecorder);\n    if (!hasMediaRecorder) {\n      console.warn('MediaRecorder API not supported in this browser');\n    }\n  };\n  const startRecording = async () => {\n    if (!speechSupported) {\n      setError('Audio recording is not supported in your browser. Please use Chrome, Edge, or Firefox.');\n      return;\n    }\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        audio: {\n          echoCancellation: true,\n          noiseSuppression: true,\n          sampleRate: 16000\n        }\n      });\n      mediaRecorderRef.current = new MediaRecorder(stream, {\n        mimeType: 'audio/webm'\n      });\n      audioChunksRef.current = [];\n      mediaRecorderRef.current.ondataavailable = event => {\n        if (event.data.size > 0) {\n          audioChunksRef.current.push(event.data);\n        }\n      };\n      mediaRecorderRef.current.onstop = async () => {\n        const audioBlob = new Blob(audioChunksRef.current, {\n          type: 'audio/webm'\n        });\n        await processAudioBlob(audioBlob);\n\n        // Stop all tracks\n        stream.getTracks().forEach(track => track.stop());\n      };\n      mediaRecorderRef.current.start();\n      setIsListening(true);\n      setError('');\n      console.log('Recording started');\n    } catch (err) {\n      console.error('Recording error:', err);\n      setError('Failed to access microphone. Please grant permission and try again.');\n    }\n  };\n  const stopRecording = () => {\n    if (mediaRecorderRef.current && isListening) {\n      mediaRecorderRef.current.stop();\n      setIsListening(false);\n      console.log('Recording stopped');\n    }\n  };\n  const processAudioBlob = async audioBlob => {\n    setIsProcessingSpeech(true);\n    setError('');\n    try {\n      // Convert to base64\n      const reader = new FileReader();\n      reader.readAsDataURL(audioBlob);\n      reader.onloadend = async () => {\n        const base64Audio = reader.result;\n        console.log('Sending audio to speech pipeline...');\n        const response = await fetch('/api/speech/process-audio', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          credentials: 'include',\n          body: JSON.stringify({\n            audio: base64Audio,\n            language: selectedLanguage\n          })\n        });\n        const data = await response.json();\n\n        // Around line 120, modify the success handling:\n        if (data.success) {\n          var _supportedLanguages$f;\n          const newDescription = data.model_response || data.translated_text || data.original_text;\n          if (description.trim()) {\n            setDescription(prev => prev.trim() + ' ' + newDescription);\n          } else {\n            setDescription(newDescription);\n          }\n          const langName = ((_supportedLanguages$f = supportedLanguages.find(l => l.code === selectedLanguage)) === null || _supportedLanguages$f === void 0 ? void 0 : _supportedLanguages$f.name) || 'selected language';\n\n          // Show original text in console for debugging\n          if (data.original_text !== data.translated_text) {\n            console.log('Original text:', data.original_text);\n            console.log('Translated to English:', data.translated_text);\n          }\n          setSuccess(`‚úì Voice input processed (${langName})`);\n          setTimeout(() => setSuccess(''), 3000);\n        } else {\n          if (data.error_type === 'LLAMA_OFFLINE') {\n            setError('AI model is offline. Please start Ollama and ensure Llama 3.2:3b is installed.');\n          } else if (data.error_type === 'EMPTY_AUDIO') {\n            setError('No speech detected. Please speak clearly and try again.');\n          } else if (data.error_type === 'UNSUPPORTED_LANGUAGE') {\n            setError(data.error || 'Unsupported language selected.');\n          } else {\n            setError(data.error || 'Failed to process speech');\n          }\n        }\n      };\n      reader.onerror = () => {\n        setError('Failed to read audio file');\n        setIsProcessingSpeech(false);\n      };\n    } catch (err) {\n      console.error('Speech processing error:', err);\n      setError('Network error. Please check your connection.');\n      setIsProcessingSpeech(false);\n    } finally {\n      setIsProcessingSpeech(false);\n    }\n  };\n  const handleEnhance = async () => {\n    if (!description.trim()) {\n      setError('Please enter or speak a description first');\n      return;\n    }\n    setIsEnhancing(true);\n    setError('');\n    setSuccess('');\n    try {\n      const response = await fetch('/api/ai/enhance-description', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n          description: description.trim()\n        })\n      });\n      const data = await response.json();\n      if (data.success) {\n        setDescription(data.enhanced_description);\n        setSuccess('‚úì Description enhanced with AI');\n        setTimeout(() => setSuccess(''), 3000);\n      } else {\n        if (data.error_type === 'OLLAMA_OFFLINE') {\n          setError('AI model is offline. Please start Ollama and ensure Llama 3.2:3b is installed.');\n        } else {\n          setError(data.error || 'Failed to enhance description');\n        }\n      }\n    } catch (err) {\n      console.error('Enhancement error:', err);\n      setError('Network error. Please check your connection.');\n    } finally {\n      setIsEnhancing(false);\n    }\n  };\n  const handleManualInput = e => {\n    // User can type freely at any time\n    setDescription(e.target.value);\n    setError(''); // Clear errors when user starts typing\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"maintenance-input-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"input-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"maintenance-description\",\n        children: [\"Maintenance Description\", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"input-hint\",\n          children: \"Type or speak your description\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"button-group\",\n        children: [speechSupported && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"language-selector\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"speech-language\",\n            className: \"sr-only\",\n            children: \"Speech Language\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            id: \"speech-language\",\n            value: selectedLanguage,\n            onChange: e => setSelectedLanguage(e.target.value),\n            className: \"language-select\",\n            disabled: isListening || isProcessingSpeech,\n            title: \"Select speech input language\",\n            children: supportedLanguages.map(lang => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: lang.code,\n              children: [\"\\uD83C\\uDF10 \", lang.native]\n            }, lang.code, true, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 13\n        }, this), speechSupported && /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: isListening ? stopRecording : startRecording,\n          className: `mic-button ${isListening ? 'listening' : ''}`,\n          title: isListening ? 'Stop recording' : 'Start voice input',\n          disabled: isProcessingSpeech || isEnhancing,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"mic-icon\",\n            children: isListening ? '‚èπÔ∏è' : 'üé§'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 15\n          }, this), isListening ? 'Stop Recording' : 'Voice Input']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: handleEnhance,\n          disabled: isEnhancing || !description.trim() || isProcessingSpeech,\n          className: \"enhance-button\",\n          title: \"Improve description with AI\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"ai-icon\",\n            children: \"\\u2728\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 13\n          }, this), isEnhancing ? 'Enhancing...' : 'Enhance with AI']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n      id: \"maintenance-description\",\n      value: description,\n      onChange: handleManualInput,\n      placeholder: \"Type your maintenance description here, or use voice input in any Indian language...\",\n      rows: \"6\",\n      className: `\n          maintenance-textarea\n          ${isListening ? 'listening-active' : ''} \n          ${isProcessingSpeech ? 'processing' : ''}\n        `,\n      disabled: isEnhancing || isProcessingSpeech,\n      required: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 7\n    }, this), isListening && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"status-indicator listening-indicator\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"pulse\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"status-text\",\n        children: [\"\\uD83C\\uDFA4 Listening in \", ((_supportedLanguages$f2 = supportedLanguages.find(l => l.code === selectedLanguage)) === null || _supportedLanguages$f2 === void 0 ? void 0 : _supportedLanguages$f2.name) || 'selected language', \"... Speak now\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 9\n    }, this), isProcessingSpeech && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"status-indicator processing-indicator\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"status-text\",\n        children: \"Processing speech \\u2192 Transcribing \\u2192 Translating \\u2192 Enhancing...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 9\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"error-icon\",\n        children: \"\\u26A0\\uFE0F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 9\n    }, this), success && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"success-message\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"success-icon\",\n        children: \"\\u2713\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: success\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 351,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"input-help\",\n      children: /*#__PURE__*/_jsxDEV(\"small\", {\n        children: \"\\uD83D\\uDCA1 Tip: You can type manually or use voice input in Hindi, Gujarati, Tamil, Telugu, and 6 other Indian languages. Click \\\"Enhance with AI\\\" to improve any description.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 248,\n    columnNumber: 5\n  }, this);\n};\n_s(MaintenanceInput, \"hLUAnfzHbJ1Q3WMN0B7PyVH3gfM=\");\n_c = MaintenanceInput;\nexport default MaintenanceInput;\nvar _c;\n$RefreshReg$(_c, \"MaintenanceInput\");","map":{"version":3,"names":["React","useState","useEffect","useRef","jsxDEV","_jsxDEV","MaintenanceInput","onSubmit","initialValue","_s","_supportedLanguages$f2","description","setDescription","isListening","setIsListening","isEnhancing","setIsEnhancing","isProcessingSpeech","setIsProcessingSpeech","speechSupported","setSpeechSupported","selectedLanguage","setSelectedLanguage","supportedLanguages","setSupportedLanguages","error","setError","success","setSuccess","mediaRecorderRef","audioChunksRef","fetchSupportedLanguages","checkAudioSupport","response","fetch","credentials","data","json","languages","err","console","code","name","native","_navigator$mediaDevic","hasMediaRecorder","navigator","mediaDevices","getUserMedia","warn","startRecording","stream","audio","echoCancellation","noiseSuppression","sampleRate","current","MediaRecorder","mimeType","ondataavailable","event","size","push","onstop","audioBlob","Blob","type","processAudioBlob","getTracks","forEach","track","stop","start","log","stopRecording","reader","FileReader","readAsDataURL","onloadend","base64Audio","result","method","headers","body","JSON","stringify","language","_supportedLanguages$f","newDescription","model_response","translated_text","original_text","trim","prev","langName","find","l","setTimeout","error_type","onerror","handleEnhance","enhanced_description","handleManualInput","e","target","value","className","children","htmlFor","fileName","_jsxFileName","lineNumber","columnNumber","id","onChange","disabled","title","map","lang","onClick","placeholder","rows","required","_c","$RefreshReg$"],"sources":["C:/QRail/Frontend/src/components/Maintenance/MaintenanceInput.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport './MaintenanceInput.css';\r\n\r\nconst MaintenanceInput = ({ onSubmit, initialValue = '' }) => {\r\n  const [description, setDescription] = useState(initialValue);\r\n  const [isListening, setIsListening] = useState(false);\r\n  const [isEnhancing, setIsEnhancing] = useState(false);\r\n  const [isProcessingSpeech, setIsProcessingSpeech] = useState(false);\r\n  const [speechSupported, setSpeechSupported] = useState(false);\r\n  const [selectedLanguage, setSelectedLanguage] = useState('en');\r\n  const [supportedLanguages, setSupportedLanguages] = useState([]);\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n  \r\n  const mediaRecorderRef = useRef(null);\r\n  const audioChunksRef = useRef([]);\r\n\r\n  // Sync with parent's initialValue changes\r\n  useEffect(() => {\r\n    setDescription(initialValue);\r\n  }, [initialValue]);\r\n\r\n  // Notify parent of description changes\r\n  useEffect(() => {\r\n    if (onSubmit) {\r\n      onSubmit(description);\r\n    }\r\n  }, [description]);\r\n\r\n  // Load supported languages on mount\r\n  useEffect(() => {\r\n    fetchSupportedLanguages();\r\n    checkAudioSupport();\r\n  }, []);\r\n\r\n  const fetchSupportedLanguages = async () => {\r\n    try {\r\n      const response = await fetch('/api/speech/languages', {\r\n        credentials: 'include'\r\n      });\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        setSupportedLanguages(data.languages);\r\n      }\r\n    } catch (err) {\r\n      console.error('Failed to load languages:', err);\r\n      // Fallback languages\r\n      setSupportedLanguages([\r\n        { code: 'en', name: 'English', native: 'English' },\r\n        { code: 'hi', name: 'Hindi', native: '‡§π‡§ø‡§®‡•ç‡§¶‡•Ä' },\r\n        { code: 'gu', name: 'Gujarati', native: '‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä' },\r\n        { code: 'ta', name: 'Tamil', native: '‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç' },\r\n        { code: 'te', name: 'Telugu', native: '‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å' },\r\n        { code: 'bn', name: 'Bengali', native: '‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ' },\r\n        { code: 'mr', name: 'Marathi', native: '‡§Æ‡§∞‡§æ‡§†‡•Ä' },\r\n        { code: 'kn', name: 'Kannada', native: '‡≤ï‡≤®‡≥ç‡≤®‡≤°' },\r\n        { code: 'ml', name: 'Malayalam', native: '‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç' },\r\n        { code: 'pa', name: 'Punjabi', native: '‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä' }\r\n      ]);\r\n    }\r\n  };\r\n\r\n  const checkAudioSupport = () => {\r\n    const hasMediaRecorder = !!navigator.mediaDevices?.getUserMedia;\r\n    setSpeechSupported(hasMediaRecorder);\r\n    if (!hasMediaRecorder) {\r\n      console.warn('MediaRecorder API not supported in this browser');\r\n    }\r\n  };\r\n\r\n  const startRecording = async () => {\r\n    if (!speechSupported) {\r\n      setError('Audio recording is not supported in your browser. Please use Chrome, Edge, or Firefox.');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const stream = await navigator.mediaDevices.getUserMedia({ \r\n        audio: {\r\n          echoCancellation: true,\r\n          noiseSuppression: true,\r\n          sampleRate: 16000\r\n        } \r\n      });\r\n      \r\n      mediaRecorderRef.current = new MediaRecorder(stream, {\r\n        mimeType: 'audio/webm'\r\n      });\r\n      audioChunksRef.current = [];\r\n\r\n      mediaRecorderRef.current.ondataavailable = (event) => {\r\n        if (event.data.size > 0) {\r\n          audioChunksRef.current.push(event.data);\r\n        }\r\n      };\r\n\r\n      mediaRecorderRef.current.onstop = async () => {\r\n        const audioBlob = new Blob(audioChunksRef.current, { type: 'audio/webm' });\r\n        await processAudioBlob(audioBlob);\r\n        \r\n        // Stop all tracks\r\n        stream.getTracks().forEach(track => track.stop());\r\n      };\r\n\r\n      mediaRecorderRef.current.start();\r\n      setIsListening(true);\r\n      setError('');\r\n      console.log('Recording started');\r\n      \r\n    } catch (err) {\r\n      console.error('Recording error:', err);\r\n      setError('Failed to access microphone. Please grant permission and try again.');\r\n    }\r\n  };\r\n\r\n  const stopRecording = () => {\r\n    if (mediaRecorderRef.current && isListening) {\r\n      mediaRecorderRef.current.stop();\r\n      setIsListening(false);\r\n      console.log('Recording stopped');\r\n    }\r\n  };\r\n\r\n  const processAudioBlob = async (audioBlob) => {\r\n    setIsProcessingSpeech(true);\r\n    setError('');\r\n    \r\n    try {\r\n      // Convert to base64\r\n      const reader = new FileReader();\r\n      reader.readAsDataURL(audioBlob);\r\n      \r\n      reader.onloadend = async () => {\r\n        const base64Audio = reader.result;\r\n        \r\n        console.log('Sending audio to speech pipeline...');\r\n        \r\n        const response = await fetch('/api/speech/process-audio', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n          credentials: 'include',\r\n          body: JSON.stringify({\r\n            audio: base64Audio,\r\n            language: selectedLanguage\r\n          }),\r\n        });\r\n\r\n        const data = await response.json();\r\n\r\n       // Around line 120, modify the success handling:\r\n      if (data.success) {\r\n        const newDescription = data.model_response || data.translated_text || data.original_text;\r\n        \r\n        if (description.trim()) {\r\n          setDescription(prev => prev.trim() + ' ' + newDescription);\r\n        } else {\r\n          setDescription(newDescription);\r\n        }\r\n        \r\n        const langName = supportedLanguages.find(l => l.code === selectedLanguage)?.name || 'selected language';\r\n        \r\n        // Show original text in console for debugging\r\n        if (data.original_text !== data.translated_text) {\r\n          console.log('Original text:', data.original_text);\r\n          console.log('Translated to English:', data.translated_text);\r\n        }\r\n        \r\n        setSuccess(`‚úì Voice input processed (${langName})`);\r\n        setTimeout(() => setSuccess(''), 3000);\r\n      }\r\n else {\r\n          if (data.error_type === 'LLAMA_OFFLINE') {\r\n            setError('AI model is offline. Please start Ollama and ensure Llama 3.2:3b is installed.');\r\n          } else if (data.error_type === 'EMPTY_AUDIO') {\r\n            setError('No speech detected. Please speak clearly and try again.');\r\n          } else if (data.error_type === 'UNSUPPORTED_LANGUAGE') {\r\n            setError(data.error || 'Unsupported language selected.');\r\n          } else {\r\n            setError(data.error || 'Failed to process speech');\r\n          }\r\n        }\r\n      };\r\n      \r\n      reader.onerror = () => {\r\n        setError('Failed to read audio file');\r\n        setIsProcessingSpeech(false);\r\n      };\r\n      \r\n    } catch (err) {\r\n      console.error('Speech processing error:', err);\r\n      setError('Network error. Please check your connection.');\r\n      setIsProcessingSpeech(false);\r\n    } finally {\r\n      setIsProcessingSpeech(false);\r\n    }\r\n  };\r\n\r\n  const handleEnhance = async () => {\r\n    if (!description.trim()) {\r\n      setError('Please enter or speak a description first');\r\n      return;\r\n    }\r\n\r\n    setIsEnhancing(true);\r\n    setError('');\r\n    setSuccess('');\r\n\r\n    try {\r\n      const response = await fetch('/api/ai/enhance-description', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        credentials: 'include',\r\n        body: JSON.stringify({ description: description.trim() }),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (data.success) {\r\n        setDescription(data.enhanced_description);\r\n        setSuccess('‚úì Description enhanced with AI');\r\n        setTimeout(() => setSuccess(''), 3000);\r\n      } else {\r\n        if (data.error_type === 'OLLAMA_OFFLINE') {\r\n          setError('AI model is offline. Please start Ollama and ensure Llama 3.2:3b is installed.');\r\n        } else {\r\n          setError(data.error || 'Failed to enhance description');\r\n        }\r\n      }\r\n    } catch (err) {\r\n      console.error('Enhancement error:', err);\r\n      setError('Network error. Please check your connection.');\r\n    } finally {\r\n      setIsEnhancing(false);\r\n    }\r\n  };\r\n\r\n  const handleManualInput = (e) => {\r\n    // User can type freely at any time\r\n    setDescription(e.target.value);\r\n    setError(''); // Clear errors when user starts typing\r\n  };\r\n\r\n  return (\r\n    <div className=\"maintenance-input-container\">\r\n      <div className=\"input-header\">\r\n        <label htmlFor=\"maintenance-description\">\r\n          Maintenance Description\r\n          <span className=\"input-hint\">Type or speak your description</span>\r\n        </label>\r\n        \r\n        <div className=\"button-group\">\r\n          {/* Language Selector for Voice Input */}\r\n          {speechSupported && (\r\n            <div className=\"language-selector\">\r\n              <label htmlFor=\"speech-language\" className=\"sr-only\">Speech Language</label>\r\n              <select \r\n                id=\"speech-language\"\r\n                value={selectedLanguage}\r\n                onChange={(e) => setSelectedLanguage(e.target.value)}\r\n                className=\"language-select\"\r\n                disabled={isListening || isProcessingSpeech}\r\n                title=\"Select speech input language\"\r\n              >\r\n                {supportedLanguages.map(lang => (\r\n                  <option key={lang.code} value={lang.code}>\r\n                    üåê {lang.native}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          )}\r\n          \r\n          {/* Voice Input Button */}\r\n          {speechSupported && (\r\n            <button\r\n              type=\"button\"\r\n              onClick={isListening ? stopRecording : startRecording}\r\n              className={`mic-button ${isListening ? 'listening' : ''}`}\r\n              title={isListening ? 'Stop recording' : 'Start voice input'}\r\n              disabled={isProcessingSpeech || isEnhancing}\r\n            >\r\n              <span className=\"mic-icon\">{isListening ? '‚èπÔ∏è' : 'üé§'}</span>\r\n              {isListening ? 'Stop Recording' : 'Voice Input'}\r\n            </button>\r\n          )}\r\n          \r\n          {/* AI Enhance Button */}\r\n          <button\r\n            type=\"button\"\r\n            onClick={handleEnhance}\r\n            disabled={isEnhancing || !description.trim() || isProcessingSpeech}\r\n            className=\"enhance-button\"\r\n            title=\"Improve description with AI\"\r\n          >\r\n            <span className=\"ai-icon\">‚ú®</span>\r\n            {isEnhancing ? 'Enhancing...' : 'Enhance with AI'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Main Textarea - Always Editable */}\r\n      <textarea\r\n        id=\"maintenance-description\"\r\n        value={description}\r\n        onChange={handleManualInput}\r\n        placeholder=\"Type your maintenance description here, or use voice input in any Indian language...\"\r\n        rows=\"6\"\r\n        className={`\r\n          maintenance-textarea\r\n          ${isListening ? 'listening-active' : ''} \r\n          ${isProcessingSpeech ? 'processing' : ''}\r\n        `}\r\n        disabled={isEnhancing || isProcessingSpeech}\r\n        required\r\n      />\r\n\r\n      {/* Status Indicators */}\r\n      {isListening && (\r\n        <div className=\"status-indicator listening-indicator\">\r\n          <span className=\"pulse\"></span>\r\n          <span className=\"status-text\">\r\n            üé§ Listening in {supportedLanguages.find(l => l.code === selectedLanguage)?.name || 'selected language'}... \r\n            Speak now\r\n          </span>\r\n        </div>\r\n      )}\r\n\r\n      {isProcessingSpeech && (\r\n        <div className=\"status-indicator processing-indicator\">\r\n          <span className=\"spinner\"></span>\r\n          <span className=\"status-text\">\r\n            Processing speech ‚Üí Transcribing ‚Üí Translating ‚Üí Enhancing...\r\n          </span>\r\n        </div>\r\n      )}\r\n\r\n      {/* Error Messages */}\r\n      {error && (\r\n        <div className=\"error-message\">\r\n          <span className=\"error-icon\">‚ö†Ô∏è</span>\r\n          <span>{error}</span>\r\n        </div>\r\n      )}\r\n\r\n      {/* Success Messages */}\r\n      {success && (\r\n        <div className=\"success-message\">\r\n          <span className=\"success-icon\">‚úì</span>\r\n          <span>{success}</span>\r\n        </div>\r\n      )}\r\n\r\n      {/* Help Text */}\r\n      <div className=\"input-help\">\r\n        <small>\r\n          üí° Tip: You can type manually or use voice input in Hindi, Gujarati, Tamil, Telugu, and 6 other Indian languages. \r\n          Click \"Enhance with AI\" to improve any description.\r\n        </small>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MaintenanceInput;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}