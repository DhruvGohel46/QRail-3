{"ast":null,"code":"import React,{useEffect,useState}from'react';import PendingUsersTable from'./PendingUsersTable';import ActiveUsersTable from'./ActiveUsersTable';import CreateAdminForm from'./CreateAdminForm';import api from'../../services/api';import'./AdminPanel.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const AdminPanel=()=>{const[activeUsers,setActiveUsers]=useState([]);const[pendingUsers,setPendingUsers]=useState([]);const[loading,setLoading]=useState(true);const[activeTab,setActiveTab]=useState('active');// 'active', 'pending', 'create'\nconst fetchAllUsers=async()=>{setLoading(true);try{const data=await api.admin.getAllUsers();setActiveUsers(data.active_users||[]);setPendingUsers(data.pending_users||[]);}catch(error){console.error('Failed to fetch users:',error);alert('Error loading users: '+error.message);setActiveUsers([]);setPendingUsers([]);}finally{setLoading(false);}};useEffect(()=>{fetchAllUsers();},[]);const handleUpdate=()=>{// Refresh the list after any changes\nfetchAllUsers();};return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"admin-header\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"material-icons-round\",children:\"admin_panel_settings\"}),\"Admin Management\"]}),/*#__PURE__*/_jsx(\"p\",{children:\"Manage users, approve registrations, and create admin accounts\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-tabs\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"tab-button \".concat(activeTab==='active'?'active':''),onClick:()=>setActiveTab('active'),children:[/*#__PURE__*/_jsx(\"span\",{className:\"material-icons-round\",children:\"group\"}),\"Active Users\",/*#__PURE__*/_jsx(\"span\",{className:\"user-count\",children:activeUsers.length})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"tab-button \".concat(activeTab==='pending'?'active':''),onClick:()=>setActiveTab('pending'),children:[/*#__PURE__*/_jsx(\"span\",{className:\"material-icons-round\",children:\"pending_actions\"}),\"Pending Approvals\",/*#__PURE__*/_jsx(\"span\",{className:\"user-count\",children:pendingUsers.length})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"tab-button \".concat(activeTab==='create'?'active':''),onClick:()=>setActiveTab('create'),children:[/*#__PURE__*/_jsx(\"span\",{className:\"material-icons-round\",children:\"person_add\"}),\"Create Admin\"]})]}),\"      \",/*#__PURE__*/_jsx(\"div\",{className:\"admin-content\",children:loading?/*#__PURE__*/_jsxs(\"div\",{className:\"loading-state\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading users...\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[activeTab==='active'&&/*#__PURE__*/_jsxs(\"div\",{className:\"active-users-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Active Users\"}),activeUsers.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"empty-state\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No active users found\"})}):/*#__PURE__*/_jsx(ActiveUsersTable,{users:activeUsers,onUpdate:handleUpdate})]}),activeTab==='pending'&&/*#__PURE__*/_jsxs(\"div\",{className:\"pending-users-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Pending User Registrations\"}),pendingUsers.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"empty-state\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u2705 No pending approvals\"})}):/*#__PURE__*/_jsx(PendingUsersTable,{users:pendingUsers,onUpdate:handleUpdate})]}),activeTab==='create'&&/*#__PURE__*/_jsxs(\"div\",{className:\"create-admin-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Create New Admin User\"}),/*#__PURE__*/_jsx(CreateAdminForm,{onSuccess:handleUpdate})]})]})})]});};export default AdminPanel;","map":{"version":3,"names":["React","useEffect","useState","PendingUsersTable","ActiveUsersTable","CreateAdminForm","api","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AdminPanel","activeUsers","setActiveUsers","pendingUsers","setPendingUsers","loading","setLoading","activeTab","setActiveTab","fetchAllUsers","data","admin","getAllUsers","active_users","pending_users","error","console","alert","message","handleUpdate","className","children","concat","onClick","length","users","onUpdate","onSuccess"],"sources":["C:/QRail/Frontend/src/components/Admin/AdminPanel.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport PendingUsersTable from './PendingUsersTable';\r\nimport ActiveUsersTable from './ActiveUsersTable';\r\nimport CreateAdminForm from './CreateAdminForm';\r\nimport api from '../../services/api';\r\nimport './AdminPanel.css';\r\n\r\nconst AdminPanel = () => {\r\n  const [activeUsers, setActiveUsers] = useState([]);\r\n  const [pendingUsers, setPendingUsers] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [activeTab, setActiveTab] = useState('active'); // 'active', 'pending', 'create'\r\n\r\n  const fetchAllUsers = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const data = await api.admin.getAllUsers();\r\n      setActiveUsers(data.active_users || []);\r\n      setPendingUsers(data.pending_users || []);\r\n    } catch (error) {\r\n      console.error('Failed to fetch users:', error);\r\n      alert('Error loading users: ' + error.message);\r\n      setActiveUsers([]);\r\n      setPendingUsers([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchAllUsers();\r\n  }, []);\r\n\r\n  const handleUpdate = () => {\r\n    // Refresh the list after any changes\r\n    fetchAllUsers();\r\n  };\r\n\r\n  return (\r\n      <div className=\"admin-panel\">\r\n      <div className=\"admin-header\">\r\n        <h2>\r\n          <span className=\"material-icons-round\">admin_panel_settings</span>\r\n          Admin Management\r\n        </h2>\r\n        <p>Manage users, approve registrations, and create admin accounts</p>\r\n      </div>\r\n\r\n      {/* Tab Navigation */}\r\n      <div className=\"admin-tabs\">\r\n        <button\r\n          className={`tab-button ${activeTab === 'active' ? 'active' : ''}`}\r\n          onClick={() => setActiveTab('active')}\r\n        >\r\n          <span className=\"material-icons-round\">group</span>\r\n          Active Users\r\n          <span className=\"user-count\">{activeUsers.length}</span>\r\n        </button>\r\n        <button\r\n          className={`tab-button ${activeTab === 'pending' ? 'active' : ''}`}\r\n          onClick={() => setActiveTab('pending')}\r\n        >\r\n          <span className=\"material-icons-round\">pending_actions</span>\r\n          Pending Approvals\r\n          <span className=\"user-count\">{pendingUsers.length}</span>\r\n        </button>\r\n        <button\r\n          className={`tab-button ${activeTab === 'create' ? 'active' : ''}`}\r\n          onClick={() => setActiveTab('create')}\r\n        >\r\n          <span className=\"material-icons-round\">person_add</span>\r\n          Create Admin\r\n        </button>\r\n      </div>      {/* Tab Content */}\r\n      <div className=\"admin-content\">\r\n        {loading ? (\r\n          <div className=\"loading-state\">\r\n            <div className=\"spinner\"></div>\r\n            <p>Loading users...</p>\r\n          </div>\r\n        ) : (\r\n          <>\r\n            {activeTab === 'active' && (\r\n              <div className=\"active-users-section\">\r\n                <h3>Active Users</h3>\r\n                {activeUsers.length === 0 ? (\r\n                  <div className=\"empty-state\">\r\n                    <p>No active users found</p>\r\n                  </div>\r\n                ) : (\r\n                  <ActiveUsersTable users={activeUsers} onUpdate={handleUpdate} />\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {activeTab === 'pending' && (\r\n              <div className=\"pending-users-section\">\r\n                <h3>Pending User Registrations</h3>\r\n                {pendingUsers.length === 0 ? (\r\n                  <div className=\"empty-state\">\r\n                    <p>âœ… No pending approvals</p>\r\n                  </div>\r\n                ) : (\r\n                  <PendingUsersTable users={pendingUsers} onUpdate={handleUpdate} />\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {activeTab === 'create' && (\r\n              <div className=\"create-admin-section\">\r\n                <h3>Create New Admin User</h3>\r\n                <CreateAdminForm onSuccess={handleUpdate} />\r\n              </div>\r\n            )}\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminPanel;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}